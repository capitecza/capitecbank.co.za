var config={maxStepsToWrapper:5,wrapperTag:'FIELDSET',wrapperClass:'inputWrapper'};var VALIDATION=(function(){var triggerToValidate=[];$(document).on('ready pageinit',function(){$('form').each(function(){var $form=$(this);if($form.attr('data-validate')=='true'){$form.find('input').each(function(){if($(this).attr('type')=='checkbox'){bindCheckboxValidation($(this));}
else if($(this).attr('type')=='radio'){bindRadioValidation($(this));}
else{if($(this).attr('data-validateon')!==undefined&&($(this).attr('data-validateon').length>0&&$(this).attr('data-validateon')!='none')){bindTextInputValidation($(this));}}});$form.find('textarea').each(function(){if($(this).attr('data-validateon')!==undefined&&($(this).attr('data-validateon').length>0&&$(this).attr('data-validateon')!='none')){bindTextInputValidation($(this));}});$form.find('select').each(function(){bindSelectValidation($(this));});$form.on('submit',function(){for(var i=0;i<triggerToValidate.length;i++){triggerToValidate[i]();}
$form.find('input').each(function(){var $inputelement=$(this);if($inputelement.attr('type')=='checkbox'){}
else if($inputelement.attr('type')=='radio'){}
else{triggerTextInputValidation($(this));}});var valid=!$form.find('.invalid').length;if(!$form.hasClass("emailersSideForm")){if(!valid)$('html,body').animate({scrollTop:$form.find('.invalid').first().offset().top},800);}
return valid;});}});if($.hasOwnProperty('datepicker')){$('.dateInput').each(function(){var $dateInput=$(this);if($dateInput.attr("data-validate")=="futureDate"){$dateInput.datepicker({changeYear:true,changeMonth:true,minDate:0,dateFormat:'dd/mm/yy',onClose:function(arg){$(this).blur();}});}else{$dateInput.datepicker({changeYear:true,changeMonth:true,maxDate:0,dateFormat:'dd/mm/yy',onClose:function(arg){$(this).blur();}});}});$('.dateInput').prop('readonly',true);}});var triggerTextInputValidation=function($input){var valid=true;var $wrapper=findWrapper($input);var validation=$($input).attr('data-validate');if((validation&&validation!="none")&&!VALIDATOR[validation]($input.val())){valid=false;$wrapper.addClass('invalid');var errorMsg=$wrapper.find('.showValidationError');if(errorMsg!==undefined){errorMsg.show();}}
if((validation&&validation!="none")&&$input.attr('data-minvalue')&&!VALIDATOR.minimum($input.val(),$input.attr('data-minvalue'))){valid=false;var errorMsg=$wrapper.find('.showValidationError');if(errorMsg!==undefined){errorMsg.show();if(($input.attr('data-validateon').indexOf('blur')>-1)||($input.attr('data-validateon').indexOf('keyup')>-1)){$wrapper.find('input').val($input.attr('data-minvalue'));}}}
if((validation&&validation!="none")&&$input.attr('data-maxvalue')&&!VALIDATOR.maximum($input.val(),$input.attr('data-maxvalue'))){valid=false;$wrapper.addClass('invalid');var errorMsg=$wrapper.find('.showValidationError');if(errorMsg!==undefined){errorMsg.show();if(($input.attr('data-validateon').indexOf('blur')>-1)||($input.attr('data-validateon').indexOf('keyup')>-1)){setTimeout(function(){$input.val($input.attr('data-maxvalue'));errorMsg.hide();$wrapper.removeClass('invalid');},1000);}}}
if((validation&&validation!="none")){if($input.attr('data-ltfield')){var ltvalue=$input.closest('form').find('[name="'+$input.attr('data-ltfield')+'"]').val();if(!VALIDATOR.ltfield($input.val(),ltvalue)){valid=false;var errorMsg=$wrapper.find('.showValidationError');if(errorMsg!==undefined){errorMsg.show();}}}
if($input.attr('data-lteqfield')){var lteqvalue=$input.closest('form').find('[name="'+$input.attr('data-lteqfield')+'"]').val();if(!VALIDATOR.lteqfield($input.val(),lteqvalue)){valid=false;var errorMsg=$wrapper.find('.showValidationError');if(errorMsg!==undefined){errorMsg.show();}}}}
if(valid==true&&$wrapper!=null&&$wrapper!=undefined){$wrapper.removeClass('invalid');}};var bindTextInputValidation=function($input){if($input.attr('data-validate')){var validateOn=$input.attr('data-validateon');$input.on(validateOn,function(event){{if(event.keyCode==9)return false;triggerTextInputValidation($input);}});triggerToValidate.push(function(){$input.trigger(validateOn.split(' ')[0])});if(($input.attr('data-validate')=='number'||$input.attr('data-validate')=='numberValidationOnly'||$input.attr('data-validate')=='numberMin1Max84'||$input.attr('data-validate')=='numberCreditApp'||$input.attr('data-validate')=='idNumber')&&($input.attr('data-validateon').indexOf('keyup')>-1)){$input.on('keyup',function(){var value=$input.val();if(value.length&&!VALIDATOR.number(value)){$input.val(value.substring(0,value.length-1));}});}
if(($input.attr('data-validate')=='integer')&&($input.attr('data-validateon').indexOf('keyup')>-1)){$input.on('keyup',function(){if($input.val().length&&!VALIDATOR.integer($input.val())){$input.val($input.val().substring(0,$input.val().length-1));}
if($input.attr('data-maxvalue')){var maxvalue=$input.attr('data-maxvalue');if(!VALIDATOR.maximum($input.val(),maxvalue)){$input.val($input.val().substring(0,$input.val().length-1));}}
if($input.attr('data-ltfield')){var ltvalue=$input.closest('form').find('[name="'+$input.attr('data-ltfield')+'"]').val();if(!VALIDATOR.ltfield($input.val(),ltvalue)){$input.val($input.val().substring(0,$input.val().length-1));}}
if($input.attr('data-lteqfield')){var lteqvalue=$input.closest('form').find('[name="'+$input.attr('data-lteqfield')+'"]').val();if(!VALIDATOR.lteqfield($input.val(),lteqvalue)){$input.val($input.val().substring(0,$input.val().length-1));}}});}}};var bindCheckboxValidation=function($checkbox){if($checkbox.attr('data-validate')){var validateOn=$checkbox.attr('data-validateon')||'change';$checkbox.on(validateOn,function(){{var $wrapper=findWrapper($checkbox);if(!VALIDATOR[$(this).attr('data-validate')]($checkbox.is(':checked')?$checkbox.val():null)){$wrapper.addClass('invalid');}
else{$wrapper.removeClass('invalid');}}});triggerToValidate.push(function(){$checkbox.trigger(validateOn.split(' ')[0])});}};var bindRadioValidation=function($radio){if($radio.attr('data-validate')){var validateOn=$radio.attr('data-validateon')||'change';$radio.on(validateOn,function(){{var $wrapper=findWrapper($radio);if(!VALIDATOR[$(this).attr('data-validate')]($('input[name="'+$radio.attr('name')+'"]:checked').val())){$wrapper.addClass('invalid');}
else{$wrapper.removeClass('invalid');}}});triggerToValidate.push(function(){$radio.trigger(validateOn.split(' ')[0])});}};var bindSelectValidation=function($select){if($select.attr('data-validate')){var validateOn=$select.attr('data-validateon')||'change';$select.on(validateOn,function(){{var $wrapper=findWrapper($select);if(!VALIDATOR[$(this).attr('data-validate')]($select.val())){$wrapper.addClass('invalid');}
else{$wrapper.removeClass('invalid');}}});triggerToValidate.push(function(){$select.trigger(validateOn.split(' ')[0])});}};var findWrapper=function($element,counter){counter=counter||0;if(counter>config.maxStepsToWrapper){return null;}
return($element.prop('tagName')==config.wrapperTag||$element.hasClass(config.wrapperClass))?$element:findWrapper($element.parent(),counter+1);}})();var VALIDATOR=(function(){var required=function(value){return value&&value.length>0;};var minWords=function(value){return value&&value.split(' ').length>2;};var plainText=function(value){return value&&value.length&&!/[0123456789~#$%\^&*+=\[\]\\;,/{}|\\":<>\?]/g.test(value);};var plainTextValidationOnly=function(value){return!value||!value.length||!/[0123456789~#$%\^&*+=\[\]\\;,/{}|\\":<>\?]/g.test(value);};var nonZero=function(value){return value&&value!='0';};var email=function(value){if(!value||!value.length)return false;var dotTest=false;var postAtString=value.substring(value.indexOf('@'));if(postAtString.indexOf('.')!=-1){if(postAtString.indexOf('.')!=postAtString.length-1){dotTest=true;}}
var pattern=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return pattern.test(value)&&dotTest;};var emailValidationOnly=function(value){return!value||!value.length||email(value);};var phone=function(value){if(!value)return false;var cleanNumber=value.toString().replace(/[ ()\-+]/g,'');if(cleanNumber.match("^0000000000|1111111111|2222222222|3333333333|4444444444|5555555555|6666666666|7777777777|8888888888|9999999999|1234567890|0987654321")!=null){return false;}
return cleanNumber&&cleanNumber.length==10&&!cleanNumber.replace(/[0-9]/g,'').length;};var phoneInt=function(value){if(!value)return false;var cleanNumber=value.toString().replace(/[ ()\-]/g,'');console.log("clean num: %s",cleanNumber)
return cleanNumber&&cleanNumber.length>=12&&cleanNumber.charAt(0)=="+"&&!cleanNumber.replace(/[0-9+]/g,'').length;};var phoneValidationOnly=function(value){return!value||!value.length||phone(value);};var phoneIntValidationOnly=function(value){return!value||!value.length||phoneInt(value)||value=='+27';};var integer=function(value){return number(value)&&(value.toString().indexOf('.')==-1);};var number=function(value){return(value!=null)&&(value.toString().length>0)&&!isNaN(value.toString().replace(/,/g,'').replace(/ /g,''));};var numberValidationOnly=function(value){return value==null||!value.length||number(value);};var numberMin1Max84=function(value){return number(value)&&!(parseFloat(value)%1)&&parseInt(value)>0&&parseInt(value)<85;};var numberCreditApp=function(value){return number(value)&&(value.toString().indexOf(' ')==-1)&&!(parseFloat(value)%1)&&parseInt(value)>49&&parseInt(value)<250000;};var idNumber=function(value){return value&&parseInt(value)&&value.toString().length==13;};var idNumberOptionalValidationOnly=function(value){if(value===null||value===""){return true;}
return this.idNumberValidation(value);};var idNumberValidationOnly=function(value){return this.idNumberValidation(value);};var idNumberValidation=function(value){var idNumber=value;var correct=true;if(idNumber.length!=13||!isNumber(idNumber)){correct=false;}
var tempDate=new Date(idNumber.substring(0,2),idNumber.substring(2,4)-1,idNumber.substring(4,6));var id_date=tempDate.getDate();var id_month=tempDate.getMonth();var id_year=tempDate.getFullYear();var fullDate=id_date+"-"+(id_month+1)+"-"+id_year;if(!((tempDate.getYear()==idNumber.substring(0,2))&&(id_month==idNumber.substring(2,4)-1)&&(id_date==idNumber.substring(4,6)))){correct=false;}
var genderCode=idNumber.substring(6,10);var gender=parseInt(genderCode)<5000?"Female":"Male";var citzenship=parseInt(idNumber.substring(10,11))==0?"Yes":"No";var tempTotal=0;var checkSum=0;var multiplier=1;for(var i=0;i<13;++i){tempTotal=parseInt(idNumber.charAt(i))*multiplier;if(tempTotal>9){tempTotal=parseInt(tempTotal.toString().charAt(0))+parseInt(tempTotal.toString().charAt(1));}
checkSum=checkSum+tempTotal;multiplier=(multiplier%2==0)?1:2;}
if((checkSum%10)!=0){correct=false;};return correct;};var minimum=function(value,min){return value&&parseFloat(value)&&parseFloat(value)>=min;};var maximum=function(value,max){return value&&parseFloat(value)&&parseFloat(value)<=max;};var ltfield=function(value,ltvalue){return value&&parseFloat(value)&&parseFloat(value)<ltvalue;};var lteqfield=function(value,lteqvalue){return value&&parseFloat(value)&&parseFloat(value)<=lteqvalue;};var youtubeUrl=function(value){var patternLong=/^(?:https?:\/\/)?(?:www\.)?youtube\.com\/watch\?(?=.*v=((\w|-){11}))(?:\S+)?$/;var patternShort=/^(?:https?:\/\/)?(?:www\.)?youtu.be\/((\w|-){11})(?:\S+)?$/;return value&&(patternLong.test(value)||patternShort.test(value))};var occupation=function(value){return value&&value.toString().length<=40&&/^([0-9a-zA-Z ]+)$/g.test(value);};var employerName=function(value){var employerId=$("#employerId").val();return employerId&&employerId.length;};var futureDate=function(value){if(!value||!value.length)return false;var parts=value.split('/');var futureDate=new Date(parts[2],parts[1]-1,parts[0]);return futureDate.getTime()>new Date().getTime();};return{required:required,minWords:minWords,plainText:plainText,plainTextValidationOnly:plainTextValidationOnly,nonZero:nonZero,email:email,emailValidationOnly:emailValidationOnly,phone:phone,phoneInt:phoneInt,phoneValidationOnly:phoneValidationOnly,phoneIntValidationOnly:phoneIntValidationOnly,integer:integer,number:number,numberValidationOnly:numberValidationOnly,numberMin1Max84:numberMin1Max84,numberCreditApp:numberCreditApp,idNumber:idNumber,idNumberValidation:idNumberValidation,idNumberValidationOnly:idNumberValidationOnly,idNumberOptionalValidationOnly:idNumberOptionalValidationOnly,minimum:minimum,maximum:maximum,ltfield:ltfield,lteqfield:lteqfield,youtubeUrl:youtubeUrl,occupation:occupation,employerName:employerName,futureDate:futureDate};})();$(function(){$('input[type="number"]').filter('[min][max]').each(function(){$input=$(this);var min=parseInt($input.attr("min"));var max=parseInt($input.attr("max"));$input.on('input',function(event){if(this.value.length>this.maxLength){this.value=this.value.slice(0,this.maxLength)}
var value=parseInt($(this).val());if(value<min&&this.value.length==this.maxLength){this.value=min;event.preventDefault();}else if(value>max){this.value=max;event.preventDefault();}});});});